{% extends 'base.html' %}

{% load i18n %}

{% block content %}

    <form id="generate-link">


        <div class="row mainrow">
            <div class="large-4 columns">
                <input autocomplete="off" type="text" id="pk1" placeholder="Your Key"
                       value="{% if pk1 %}{{ pk1 }}{% endif %}"/>
            </div>
            <div class="large-4 columns">
                <input autocomplete="off" type="text" id="pk2" placeholder="Your Partner Key"
                       value="{% if pk2 %}{{ pk2 }}{% endif %}"/>
            </div>
            <div class="large-4 columns">
                <button class="compare" type="submit">Generate link</button>
            </div>

        </div>
    </form>

    <div class="row mainrow">
            <h4>Link to results</h4>
            <div id="link" style="visibility: hidden;">
                <a href="#">#</a>
            </div>
    </div>


    <script>
        function generateLink() {
            var pk1 = $("#pk1").val();
            var pk2 = $("#pk2").val();

            if (pk1 == null && pk2 == null) {
                return;
            }

            var url = "/compare";
            if (pk1) {
                url += "/" + encodeURIComponent(pk1);
            }
            if (pk2) {
                url += "/" + encodeURIComponent(pk2);
            }

            $("#link").css('visibility', 'visible');
            $("#link a").attr('href', url);
            $("#link a").text(url);
        }

        $(document).ready(function () {
            generateLink();
            $("#generate-link").submit(function (e) {
                generateLink();
                e.preventDefault();
            });
        });
    </script>


{% endblock %}